<!-- templates/index.html -->
<html lang="en">
  <head>
    <title>WebApp</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
    <script type="text/javascript">
			var data
			var socket = io.connect('http://' + document.domain + ':' + location.port);
      socket.on( 'connect', function() {
        socket.emit( 'my event', {
          data: 'User Connected'
        } )
			} )

			setInterval(function() {
				socket.emit( 'getData' );
			}, 1000);

			socket.on( 'returnData', function( msg ) {
				windSpd  = msg["wind"]["speed"]
				windDir  = msg["wind"]["direction"]
				swellPer = msg["swell"]["period"]
				swellDir = msg["swell"]["direction"]
				swellHgt = msg["swell"]["height"] 
				data=msg
				document.getElementById('output').innerHTML = JSON.stringify(data)
				turnArrow(windDir, "windArrow" )
				turnArrow(swellDir,"swellArrow")
				return data
			} )

			function turnArrow(w, name) {
				  let x = document.getElementById(name);
					x.style.transform = "rotate("+ (w-90)  +"deg)"
			}
    </script>
	</head>
	<body>
		<p id="output"></p>
		<img id="windArrow" src="../static/arrow.png" style="max-width:100px; height:auto;">	
		<img id="swellArrow" src="../static/arrow.png" style="max-width:100px; height:auto;">
  </body>
</html>
